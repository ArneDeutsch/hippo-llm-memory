- id: F-REL-001
  type: functionality
  priority: P0
  rationale: "Schema fast-track routing absent; DESIGN §5.4 requires SchemaIndex gating."
  steps:
    - "Integrate SchemaIndex.fast_track into KG ingestion pipeline"
    - "Expose schema_threshold in configs and wiring"
    - "Ensure episodic buffer flushes into KG on success"
  files: ["hippo_mem/relational/schema.py", "hippo_mem/relational/kg.py", "configs/memory/relational.yaml"]
  est_hours: 8
  deps: []

- id: F-SHARE-001
  type: functionality
  priority: P0
  rationale: "Nightly decay/prune jobs missing; DESIGN §11 mandates scheduled maintenance and rollback."
  steps:
    - "Add background scheduler triggering store.decay/prune per config"
    - "Persist maintenance logs and support rollback of last N ops"
  files: ["hippo_mem/episodic/store.py", "hippo_mem/relational/kg.py", "hippo_mem/spatial/map.py", "hippo_mem/consolidation/worker.py"]
  est_hours: 10
  deps: []

- id: T-EPI-001
  type: test
  priority: P1
  rationale: "Hopfield completion untested; ensures partial-cue recovery works."
  steps:
    - "Write test_hopfield_completion_restores_sparse_cue in tests/test_episodic.py"
    - "Validate reconstructed key cosine≥0.9"
  files: ["tests/test_episodic.py"]
  est_hours: 2
  deps: []

- id: T-REL-002
  type: test
  priority: P0
  rationale: "Schema routing threshold behaviour unverified; core to SGC-RSS."
  steps:
    - "Add parametrised test around SchemaIndex.threshold"
    - "Assert KG receives only high-confidence tuples"
  files: ["tests/test_relational.py"]
  est_hours: 2
  deps: ["F-REL-001"]

- id: T-SHARE-001
  type: test
  priority: P1
  rationale: "Ablation toggles (e.g., hopfield=false) not covered; DESIGN §9."
  steps:
    - "Create tests invoking train_lora.py and eval_bench.py with ablations"
    - "Assert modules respect toggles via logs or outputs"
  files: ["tests/test_training.py", "tests/test_eval_plumbing.py"]
  est_hours: 3
  deps: []

- id: R-EPI-002
  type: refactor
  priority: P2
  rationale: "Bandit flags try/except pass and string SQL in EpisodicStore."
  steps:
    - "Replace f-string SQL with parameterised queries"
    - "Log exceptions instead of silent pass"
    - "Add unit tests for error paths"
  files: ["hippo_mem/episodic/store.py", "tests/test_episodic.py"]
  est_hours: 4
  deps: []

- id: R-LINT-001
  type: refactor
  priority: P2
  rationale: ">100 flake8 E501 errors; violates CODING_STANDARDS.md."
  steps:
    - "Wrap lines to 79 chars and run black"
    - "Enable flake8 in CI with --max-line-length=88 after formatting"
  files: ["*"]
  est_hours: 6
  deps: []
