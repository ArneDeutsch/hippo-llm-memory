- id: F-EPI-001
  type: functionality
  priority: P0
  rationale: "k-WTA sparse key projection missing; DESIGN ยง5.2 requires DGKey use."
  steps:
    - "Implement k-WTA encoder returning DGKey and integrate into EpisodicStore.write"
    - "Update store and adapter to operate on DGKey"
    - "Add tests: test_kwta_produces_sparse_indices"
  files: ["hippo_mem/episodic/store.py", "hippo_mem/episodic/gating.py", "tests/test_episodic.py"]
  est_hours: 6
  deps: []

- id: T-REL-001
  type: test
  priority: P1
  rationale: "Schema fast-track routing lacks threshold test."
  steps:
    - "Add test_schema_fast_track_threshold per TEST_GAPS.md"
  files: ["tests/test_relational.py"]
  est_hours: 2
  deps: []

- id: T-RET-002
  type: test
  priority: P1
  rationale: "Retrieval utilities have zero coverage."
  steps:
    - "Implement FaissIndex smoke tests"
    - "Exercise embed_text with simple inputs"
  files: ["tests/test_retrieval.py", "hippo_mem/retrieval/"]
  est_hours: 3
  deps: []

- id: R-TRN-003
  type: refactor
  priority: P2
  rationale: "ConsolidationWorker aborts when adapters lack trainable params"
  steps:
    - "Skip optimisation when adapters disabled or r=0"
    - "Add regression test"
  files: ["hippo_mem/consolidation/worker.py", "tests/test_consolidation_worker.py"]
  est_hours: 4
  deps: []

- id: R-LNT-004
  type: refactor
  priority: P3
  rationale: "Line length violations across repo"
  steps:
    - "Run black/ruff format"
    - "Update CI config if needed"
  files: ["hippo_mem/", "scripts/", "tests/"]
  est_hours: 5
  deps: []
