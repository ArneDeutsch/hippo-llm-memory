- id: F-EPI-001
  type: functionality
  priority: P0
  rationale: "EpisodicAdapter lacks FlashAttention hooks required by DESIGN ยง6."
  steps:
    - "Integrate FlashAttention kernels where available in hippo_mem/episodic/adapter.py"
    - "Expose Hydra toggle efficiency.flash_attention"
    - "Add unit test exercising adapter under flag"
  files: ["hippo_mem/episodic/adapter.py", "scripts/train_lora.py", "tests/test_episodic.py"]
  est_hours: 8
  deps: []
- id: F-EPI-002
  type: functionality
  priority: P0
  rationale: "ReplayScheduler lacks gradient-overlap minimization; DESIGN ยง5.3 requires interference-aware scheduling."
  steps:
    - "Compute cosine similarity between consecutive gradients"
    - "Skip or reorder items exceeding overlap threshold"
    - "Add tests validating non-consecutive similar items"
  files: ["hippo_mem/episodic/replay.py", "tests/test_episodic.py"]
  est_hours: 6
  deps: []
- id: T-EPI-001
  type: test
  priority: P0
  rationale: "No tests for maintenance and rollback in EpisodicStore."
  steps:
    - "Create traces, run decay and prune, then rollback"
    - "Assert salience/keys restored and events logged"
  files: ["tests/test_episodic.py"]
  est_hours: 3
  deps: []
- id: T-EPI-002
  type: test
  priority: P0
  rationale: "ReplayScheduler mix ratios and duplicate avoidance untested."
  steps:
    - "Populate queue and verify next_batch returns 0.5/0.3/0.2 split"
    - "Ensure sampled episodic ids are unique when possible"
  files: ["tests/test_episodic.py"]
  est_hours: 3
  deps: []
- id: T-REL-001
  type: test
  priority: P1
  rationale: "KnowledgeGraph GNN updates and rollback lack coverage."
  steps:
    - "Upsert edges with embeddings"
    - "Trigger rollback and verify embeddings restored"
  files: ["tests/test_relational.py"]
  est_hours: 4
  deps: []
- id: T-SPA-001
  type: test
  priority: P1
  rationale: "PlaceGraph decay/prune/rollback behavior untested."
  steps:
    - "Observe sequence, run decay and prune, then rollback"
    - "Check coordinates and edges restored"
  files: ["tests/test_spatial.py"]
  est_hours: 4
  deps: []
- id: F-SHR-001
  type: functionality
  priority: P1
  rationale: "Config hash and reproducibility metadata missing from metrics."
  steps:
    - "Compute config hash in eval_bench and store in meta.json"
    - "Add test ensuring hash present"
  files: ["scripts/eval_bench.py", "tests/test_eval_plumbing.py"]
  est_hours: 2
  deps: []
- id: R-CON-001
  type: refactor
  priority: P1
  rationale: "ConsolidationWorker.run has high complexity and runtime errors."
  steps:
    - "Split run loop into helpers"
    - "Add gradient requirement checks"
    - "Expand tests for worker success path"
  files: ["hippo_mem/consolidation/worker.py", "tests/test_consolidation_worker.py"]
  est_hours: 6
  deps: [T-EPI-002]
- id: R-LINT-001
  type: refactor
  priority: P2
  rationale: "Extensive E501/E402 violations block CI."
  steps:
    - "Apply black formatting and reorganize imports"
    - "Enable flake8 in CI and ensure clean run"
  files: ["hippo_mem/**", "scripts/**", "tests/**"]
  est_hours: 8
  deps: []
